compressBitmap=function(){class t{constructor(t,s){this.m=t,this.n=s,this.adj=Array(t+1).fill().map((()=>[]))}hopcroftKarp(){for(this.dist=Array(this.m+1).fill(),this.pairU=Array(this.m+1).fill(0),this.pairV=Array(this.n+1).fill(0);this.bfs();)for(let t=this.pairU.length;--t;)0===this.pairU[t]&&this.dfs(t)}bfs(){var t=[];for(let s=this.pairU.length;--s;)0===this.pairU[s]?(this.dist[s]=0,t.push(s)):this.dist[s]=1/0;for(this.dist[0]=1/0;t.length;){let s=t.shift();if(this.dist[s]<this.dist[0])for(let i,r=this.adj[s].length;r--;)i=this.adj[s][r],this.dist[this.pairV[i]]===1/0&&(this.dist[this.pairV[i]]=this.dist[s]+1,t.push(this.pairV[i]))}return this.dist[0]!==1/0}dfs(t){if(0!==t){for(let s,i=this.adj[t].length;i--;)if(s=this.adj[t][i],this.dist[this.pairV[s]]===this.dist[t]+1&&this.dfs(this.pairV[s]))return this.pairV[s]=t,this.pairU[t]=s,!0;return this.dist[t]=1/0,!1}return!0}dfs2(t){this.visU[t]=!0;for(let s,i=this.adj[t].length;i--;)s=this.adj[t][i],this.pairU[t]===s||this.visV[s]||(this.visV[s]=!0,this.pairV[s]&&!this.visU[this.pairV[s]]&&this.dfs2(this.pairV[s]))}maxIS(){this.hopcroftKarp(),this.visU=Array(this.m+1).fill(!1),this.visV=Array(this.n+1).fill(!1);for(let t=this.pairU.length;--t;)this.pairU[t]||this.dfs2(t);return{m:this.visU,n:this.visV.map((t=>!t))}}addEdge(t,s){this.adj[t].push(s)}}class s{constructor(t,s,i){this.coords=[t,s],this.adjacents=i;var r=i>>>1|(1&i)<<3;this.edges=i^r,this.internals=(i|r)^this.edges}}class i{constructor(t,s){this.c1=t,this.c2=s,this.x1=t[0],this.y1=t[1],this.x2=s[0],this.y2=s[1]}intersects(t){return t.y1>=this.y1&&t.y1<=this.y2&&this.x1>=t.x1&&this.x1<=t.x2}}function r(t){for(var s=0;s+=1&t,t>>=1;);return s}return function(e){const h=e.m[0].length,n=e.m.length;for(let t=n;--t;)if(e.m[t].length!==h)return"// ERROR: Input bitmap row length is not uniform.";const a=[],d=e.m.map((t=>t.split("").map((t=>(a.includes(t)||a.push(t),t))))),l=[];return a.forEach((e=>{const h=d.findIndex((t=>t.includes(e))),n=d.findLastIndex((t=>t.includes(e))),a=d.reduce(((t,s)=>{let i=s.findIndex((t=>t===e));return-1!==i?Math.min(t,i):t}),1/0),o=d.reduce(((t,s)=>Math.max(t,s.findLastIndex((t=>t===e)))),0),f=d.slice(h,n+1).map((t=>t.slice(a,o+1).map((t=>t===e)))),c=f.length,p=f[0].length,g=Array(c+1).fill().map(((t,i)=>Array(p+1).fill().map(((t,r)=>!!(f[i]&&(f[i][r]||f[i][r-1])||f[i-1]&&(f[i-1][r]||f[i-1][r-1]))&&new s(r,i,(f[i-1]&&f[i-1][r])<<3|(f[i]&&f[i][r])<<2|(f[i]&&f[i][r-1])<<1|(f[i-1]&&f[i-1][r-1])<<0))))),u=[],m=[];g.forEach(((t,s)=>{t.forEach(((t,e)=>{if(2===r(t.internals)){if(4&t.internals)for(var h=0;n=g[s][e+(h+=1)];)if(2===r(n.internals)&&1&n.internals){m.push(new i(t.coords,n.coords));break}if(2&t.internals){var n;for(h=0;g[s+(h+=1)]&&(n=g[s+h][e]);)if(2===r(n.internals)&&8&n.internals){u.push(new i(t.coords,n.coords));break}}}}))}));const y=new t(u.length,m.length);u.forEach(((t,s)=>{m.forEach(((i,r)=>{t.intersects(i)&&y.addEdge(s+1,r+1)}))}));for(var x,v=y.maxIS(),V=v.m.length;--V;)if(v.m[V]){x=u[V-1],g[x.y1][x.x1].edges|=2,g[x.y1][x.x1].internals^=2;for(var w=x.y1,j=x.x1;++w<x.y2;)g[w][j].edges|=10;g[x.y2][x.x1].edges|=8,g[x.y2][x.x1].internals^=8}var E;for(V=v.n.length;--V;)if(v.n[V]){E=m[V-1],g[E.y1][E.x1].edges|=4,g[E.y1][E.x1].internals^=4;for(j=E.x1,w=E.y1;++j<E.x2;)g[w][j].edges|=5;g[E.y1][E.x2].edges|=1,g[E.y1][E.x2].internals^=1}g.forEach(((t,s)=>{t.forEach(((t,i)=>{if(2===r(t.internals))switch(5&t.internals){case 4:g[s][i].edges|=4;for(var e=i;!(10&g[s][++e].edges);)g[s][e].edges|=5;g[s][e].edges|=1;break;case 1:g[s][i].edges|=1;for(e=i;!(10&g[s][--e].edges);)g[s][e].edges|=5;g[s][e].edges|=4}}))})),g.forEach(((t,s)=>{t.forEach(((t,i)=>{if(6==(6&t.edges)&&4&t.adjacents){let t=0,r=0;for(;!(4&g[s+ ++r][i].edges););for(;!(2&g[s][i+ ++t].edges););1===t&&2===r?(l.push({x:i+a,y:s+h,w:1,h:1,c:e}),l.push({x:i+a,y:s+1+h,w:1,h:1,c:e})):l.push({x:i+a,y:s+h,w:t,h:r,c:e})}}))}))})),'{\n  m:"'+l.sort(((t,s)=>t.y<s.y?-1:t.y>s.y?1:t.x<s.x?-1:1)).map((t=>(t.w>1?t.w:"")+(t.h>1?"-"+t.h:"")+t.c)).join("")+'",\n  p:"'+Object.keys(e.p).map((t=>{if(" "!==t&&"_"!==t){var[s,i,r,h]=function(t){let s=document.createElement("div");s.style.color=t,s.style.display="none",document.body.appendChild(s);let i=window.getComputedStyle(s).getPropertyValue("color");s.remove();let[r,e,h,n]=i.match(/[0-9.]+/g).map(Number);return n=void 0===n?1:n,[r,e,h,n]}(e.p[t]);return(255*h<<24&4278190080|s<<16&16711680|i<<8&65280|255&r)+t}})).join("")+'",\n  w:'+h+",\n  h:"+n+",\n  s:"+Math.floor(400/Math.max(n,h))+",\n}"}}();
